---
# Make Installation
- name: Ensure GNU Make are installed
  become: true
  yum:
    update_cache: true
    state: present
    name: "@Development tools"

# Node Installation
- name: Install and Configure Node / NPM
  block:

    - name: Install NodeJs and NPM
      yum:
        update_cache: true
        state: latest
        name: nodejs
      tags: "node"
  become: true

# Docker Installation
- name: Install and Configure Docker
  block:
    - name: Install Docker Pre-Req
      yum:
        update_cache: true
        state: latest
        name: "{{ docker_req }}"

    - name: Install Docker Engine
      yum:
        update_cache: true
        state: latest
        name: "{{ docker_pkgs }}"

    - name: Start Docker
      service:
        name: docker
        state: restarted
        enabled: true

    - name: Adding user to docker group
      command: usermod -a -G docker $USER

    - name: Adding priveleges to docker.sock
      command : chown $USER /var/run/docker.sock
  become: true
